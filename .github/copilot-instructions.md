# GitHub Copilot Instructions - agent-ready-k8s

---

## 🎯 Project Goal

Build a **production-ready, AI-agent-controlled Kubernetes template** that enables:
- **Autonomous AI deployment & operations** (agent-driven GitOps)
- **Modular architecture** (composable blocks, hot-reload config)
- **Cloud-agnostic design** (local → AKS → on-prem → EKS/GKE)
- **Self-documenting structure** (AI navigates via metadata)
- **Fast iteration** (local setup <5min, automated testing)

**Why "agent-ready"?**
Traditional K8s requires manual decisions. This template provides machine-readable metadata, atomic blocks, and idempotent workflows that AI agents can execute autonomously.

---

## 🚨 Critical Rules

### PRIO 0: Language
**ALL code, docs, commits MUST be in ENGLISH.**
Input can be any language → Output always English.

### PRIO 1: Architecture
**Before ANY technical decision, read:**
[`docs/architecture/ARCHITECTURE.md`](../docs/architecture/ARCHITECTURE.md)

Contains: Golden rules, provider mapping, security policies, vendor lock-in prevention.

### PRIO 2: Maintenance
**Update this file when:**
Files/folders created, scripts changed, tech stack updated, phase completed.

---

## � Documentation Registry

### Quick Access
| Document | Purpose | Link |
|----------|---------|------|
| **Quickstart** | Boot routine, after-reboot checklist | [`docs/quickstart/Quickstart.md`](../docs/quickstart/Quickstart.md) |
| **Phase 0 Roadmap** | Complete task list, current status | [`docs/roadmap/Phase-0.md`](../docs/roadmap/Phase-0.md) |
| **Architecture** | Design decisions, golden rules | [`docs/architecture/ARCHITECTURE.md`](../docs/architecture/ARCHITECTURE.md) |
| **README** | Project overview, getting started | [`README.md`](../README.md) |

### Phase Roadmaps
| Phase | Status | File |
|-------|--------|------|
| **Phase 0** | ✅ Complete | [`docs/roadmap/Phase-0.md`](../docs/roadmap/Phase-0.md) |
| **Phase 1** | 📋 Planned | `docs/roadmap/Phase-1.md` (not yet created) |
| **Phase 2** | 📋 Planned | `docs/roadmap/Phase-2.md` (not yet created) |

---

## 🏗️ Project Structure

```
agent-ready-k8s/
├── .github/
│   └── copilot-instructions.md        ← You are here (AI navigation)
├── docs/
│   ├── quickstart/Quickstart.md       ← Boot routine, access credentials
│   ├── roadmap/Phase-0.md             ← Phase 0 task list & status
│   └── architecture/ARCHITECTURE.md   ← Design principles (MANDATORY READ)
├── setup-template/
│   └── phase0-template-foundation/
│       ├── setup-phase0.sh            ← Main orchestrator
│       └── 01-08-*/                   ← 8 deployment blocks
├── apps/                              ← Generated by setup
├── clusters/                          ← Generated by setup
├── infrastructure/                    ← Generated by setup
├── policies/                          ← Generated by setup
└── README.md                          ← Project overview
```

---

## 🛠️ Tech Stack

### Phase 0 (Local Development) - ✅ Complete
- **Runtime:** Docker + kind (Kubernetes v1.27.3)
- **Tools:** kubectl, Helm, Argo CD CLI
- **Components:**
  - Ingress-Nginx (HTTP routing)
  - PostgreSQL 18.0.0 (config storage)
  - Redis 8.2.2 (Hot-Reload Pub/Sub)
  - Argo CD v2.12.3 (GitOps UI)
  - podinfo v6.9.2 (demo app)

### Phase 1 (Planned)
- Hot-Reload implementation
- Multi-tenant configuration

### Phase 2 (Planned)
- Azure AKS deployment
- Production GitOps pipeline

---

## � Quick Commands

### After Reboot
```bash
# Full boot routine in docs/quickstart/Quickstart.md
docker ps | grep agent-k8s-local          # Check container
kubectl get nodes                         # Check cluster
curl http://argocd.local                  # Test endpoint
```

### Fresh Install
```bash
./setup-template/phase0-template-foundation/setup-phase0.sh
```

### Cleanup
```bash
kind delete cluster --name agent-k8s-local
rm -rf apps/ clusters/ infrastructure/ policies/ kind-config.yaml
```

---

## 📊 Current Status

**Active Phase:** Phase 0 - Complete ✅
**Runtime:** 21 pods running across 5 namespaces
**Endpoints:** http://argocd.local, http://demo.localhost
**Last Updated:** 2025-10-17

---

## 🤖 AI Agent Notes

- All commands are **idempotent** (safe to re-run)
- Setup scripts have **built-in retry logic** (3× with 5s backoff)
- Pods auto-restart after reboot (Docker handles container restart)
- Expected outputs documented in [`docs/quickstart/Quickstart.md`](../docs/quickstart/Quickstart.md)
- On failure: Collect logs with `kubectl logs -n <namespace> <pod>`
