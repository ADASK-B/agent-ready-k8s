# GitHub Copilot Instructions - agent-ready-k8s

---

## ðŸŽ¯ Project Goal

Build a **production-ready, AI-agent-controlled Kubernetes template** that enables:
- **Autonomous AI deployment & operations** (agent-driven GitOps)
- **Modular architecture** (composable blocks, hot-reload config)
- **Cloud-agnostic design** (local â†’ AKS â†’ on-prem â†’ EKS/GKE)
- **Self-documenting structure** (AI navigates via metadata)
- **Fast iteration** (local setup <5min, automated testing)

**Why "agent-ready"?**
Traditional K8s requires manual decisions. This template provides machine-readable metadata, atomic blocks, and idempotent workflows that AI agents can execute autonomously.

---

## ðŸš¨ Critical Rules

### PRIO 0: Language
**ALL code, docs, commits MUST be in ENGLISH.**
Input can be any language â†’ Output always English.

### PRIO 1: Architecture
**Before ANY technical decision, read:**
[`docs/architecture/ARCHITECTURE.md`](../docs/architecture/ARCHITECTURE.md)

Contains: Golden rules, provider mapping, security policies, vendor lock-in prevention.

### PRIO 2: Maintenance
**Update this file when:**
Files/folders created, scripts changed, tech stack updated, phase completed.

---

## ï¿½ Documentation Registry

### Quick Access
| Document | Purpose | Link |
|----------|---------|------|
| **Quickstart** | Boot routine, after-reboot checklist | [`docs/quickstart/Quickstart.md`](../docs/quickstart/Quickstart.md) |
| **Phase 0 Roadmap** | Complete task list, current status | [`docs/roadmap/Phase-0.md`](../docs/roadmap/Phase-0.md) |
| **Architecture** | Design decisions, golden rules | [`docs/architecture/ARCHITECTURE.md`](../docs/architecture/ARCHITECTURE.md) |
| **README** | Project overview, getting started | [`README.md`](../README.md) |

### Phase Roadmaps
| Phase | Status | File |
|-------|--------|------|
| **Phase 0** | âœ… Complete | [`docs/roadmap/Phase-0.md`](../docs/roadmap/Phase-0.md) |
| **Phase 1** | ðŸ“‹ Planned | `docs/roadmap/Phase-1.md` (not yet created) |
| **Phase 2** | ðŸ“‹ Planned | `docs/roadmap/Phase-2.md` (not yet created) |

---

## ðŸ—ï¸ Project Structure

```
agent-ready-k8s/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ copilot-instructions.md        â† You are here (AI navigation)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ quickstart/Quickstart.md       â† Boot routine, access credentials
â”‚   â”œâ”€â”€ roadmap/Phase-0.md             â† Phase 0 task list & status
â”‚   â””â”€â”€ architecture/ARCHITECTURE.md   â† Design principles (MANDATORY READ)
â”œâ”€â”€ setup-template/
â”‚   â””â”€â”€ phase0-template-foundation/
â”‚       â”œâ”€â”€ setup-phase0.sh            â† Main orchestrator
â”‚       â””â”€â”€ 01-08-*/                   â† 8 deployment blocks
â”œâ”€â”€ apps/                              â† Generated by setup
â”œâ”€â”€ clusters/                          â† Generated by setup
â”œâ”€â”€ infrastructure/                    â† Generated by setup
â”œâ”€â”€ policies/                          â† Generated by setup
â””â”€â”€ README.md                          â† Project overview
```

---

## ðŸ› ï¸ Tech Stack

### Phase 0 (Local Development) - âœ… Complete
- **Runtime:** Docker + kind (Kubernetes v1.27.3)
- **Tools:** kubectl, Helm, Argo CD CLI
- **Components:**
  - Ingress-Nginx (HTTP routing)
  - PostgreSQL 18.0.0 (config storage)
  - Redis 8.2.2 (Hot-Reload Pub/Sub)
  - Argo CD v2.12.3 (GitOps UI)
  - podinfo v6.9.2 (demo app)

### Phase 1 (Planned)
- Hot-Reload implementation
- Multi-tenant configuration

### Phase 2 (Planned)
- Azure AKS deployment
- Production GitOps pipeline

---

## ï¿½ Quick Commands

### After Reboot
```bash
# Full boot routine in docs/quickstart/Quickstart.md
docker ps | grep agent-k8s-local          # Check container
kubectl get nodes                         # Check cluster
curl http://argocd.local                  # Test endpoint
```

### Fresh Install
```bash
./setup-template/phase0-template-foundation/setup-phase0.sh
```

### Cleanup
```bash
kind delete cluster --name agent-k8s-local
rm -rf apps/ clusters/ infrastructure/ policies/ kind-config.yaml
```

---

## ðŸ“Š Current Status

**Active Phase:** Phase 0 - Complete âœ…
**Runtime:** 21 pods running across 5 namespaces
**Endpoints:** http://argocd.local, http://demo.localhost
**Last Updated:** 2025-10-17

---

## ðŸ¤– AI Agent Notes

- All commands are **idempotent** (safe to re-run)
- Setup scripts have **built-in retry logic** (3Ã— with 5s backoff)
- Pods auto-restart after reboot (Docker handles container restart)
- Expected outputs documented in [`docs/quickstart/Quickstart.md`](../docs/quickstart/Quickstart.md)
- On failure: Collect logs with `kubectl logs -n <namespace> <pod>`
